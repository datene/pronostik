<%= render 'question-show', question: question %>
<br>
<br>
<br>
<div class="row">
  <div class="col-sm-12">
    <h3>Quick Stats Overview</h3>
    <h4> You bet on : <%=@choosen_scenario.content.capitalize %></h4>
</div>
</div>

<div class="bordered card-sean padded-chart text-center">
  <div class="row">
    <div class="col-sm-6">
      <h3># of Bets per scenario</h3>
        <%= column_chart @column_chart %>
      </div>
    <div class="col-sm-6">
      <h3>Average Certainty</h3>
      <%= bar_chart @bar_chart %>
    </div>
  </div>
</div>

<div class="bordered card-sean padded-chart text-center">
  <div class="row">
    <div class="col-sm-12">
      <h3>Where do people who bet come from ?</h3>
      <h3><%= geo_chart @result%></h3>
    </div>
  </div>
</div>

<div class="bordered card-sean padded-chart text-center">
  <div class="row">
    <div class="col-sm-12">

    <h3>Pronostik's Awesome prediction</h3> <p>based on our collective intellingence algorithm. <%= link_to "Find out more", faq_path %>.</p>
    <h3><%= @prediction.capitalize %></h3>
    </div>
  </div>
</div>
<%if @existing_bet.justification.nil? %>
  <div class="row">
    <div class="col-sm-12">
        <div class="bordered card-sean padded-chart text-center">

      <h3>Justify your bet</h3>
      <p>Provide an explaination (1000 chars max) and the main source you relied on. <%= link_to "Find out more", faq_path %>.</p>

        <%= simple_form_for @existing_bet, url: question_bet_path(@question, @existing_bet) do |f| %>
        <%= f.input :justification, placeholder: 'Why did you bet on this scenario?'%>
        <%= f.input :Url, placeholder: 'What source did you use the most?'%>
        <%= f.submit %>
        <%end%>
    </div>
    </div>
  </div>
<%end%>

  <%#if @existing_bet.justification.nil? == false%>
<div class="row">
  <div class="col-sm-12">
      <div class="bordered card-sean padded-chart text-center">

  <h3>Other Users' Justification</h3>
        <% @all_bets.each do |bet| %>
          <div class="white-back">
          <div class="justification-positionning">
          <div class="justification-flex-item2 text-center">
            <p> <strong>Upvotes</strong></p>
            <p><%= bet.just_upvotes.count %></p>
            <p><% if bet.just_upvotes.where(bet_id: bet.id, user_id: current_user.id).empty? %> <%= link_to "Upvote !", question_bet_just_upvotes_path(bet.scenario.question, bet), :method=> :post,  class: "btn btn-primary" %><%end%></p>
          </div>
          <div class="justification-flex-body">
            <p>  <strong><%=bet.user.first_name.capitalize %></strong></p>
            <div><%=bet.justification %></div>
          </div>
          <div class="justification-flex-item2">
            <p>  <strong>Source</strong></p>
            <p><%=bet.Url.capitalize unless bet.Url.nil? %></p>
          </div>
          </div>
          </div>
        <%end%>
      </div>
    </div>
  </div>

  <%#end%>
